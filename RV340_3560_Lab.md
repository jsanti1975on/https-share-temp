
# Cisco RV340 + Catalyst 3560 Lab Setup

This lab demonstrates a clean design with:
- **One trunk uplink** from RV340 to East 3560
- **EtherChannel trunk** between East & West 3560s
- **Clients on East**, **Servers on West**, and **Wireless Controller on West**
- VLAN 10 = Clients/Servers (`172.20.10.0/24`)
- VLAN 999 = Management/Transit (`10.10.10.0/24`)
- RV340 remains the default gateway for VLAN 10

---

## ðŸŸ¢ Step 1: RV340 Configuration (LAN2 Uplink)

### VLANs
- VLAN 10 â†’ IP: `172.20.10.1/24` (DHCP enabled for clients/servers)
- VLAN 999 â†’ IP: `10.10.10.1/24` (management, optional DHCP)
- VLAN 1 â†’ Excluded from trunk

### VLANs-to-Port Table (LAN2 â†’ East Fa0/1)
- VLAN 999 = **Untagged**
- VLAN 10 = **Tagged**
- VLAN 1 = **Excluded**
- Others = **Excluded**

---

## ðŸŸ¢ Step 2: Reset East & West Switches
On each 3560:
```
write erase
delete flash:vlan.dat
reload
```

---

## ðŸŸ¢ Step 3: East 3560 Config

```cisco
hostname East
no ip domain-lookup

! VLANs
vlan 10
 name Clients-Servers
vlan 999
 name Transit

! Management SVI
interface vlan 999
 ip address 10.10.10.2 255.255.255.0
 no shutdown

! Uplink to RV340
interface fa0/1
 description Uplink-to-RV340
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 10,999
 no shutdown

! EtherChannel trunk to West
interface range fa0/7 - 8
 description Trunk-to-West
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 10,999
 channel-protocol lacp
 channel-group 7 mode active
 no shutdown

interface port-channel 7
 description Trunk-to-West
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 10,999

! Client Host
interface fa0/3
 description vSphere-Client
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast
 spanning-tree bpduguard enable
 no shutdown
```

---

## ðŸŸ¢ Step 4: West 3560 Config

```cisco
hostname West
no ip domain-lookup

! VLANs
vlan 10
 name Clients-Servers
vlan 999
 name Transit

! Management SVI
interface vlan 999
 ip address 10.10.10.3 255.255.255.0
 no shutdown

! EtherChannel trunk to East
interface range fa0/7 - 8
 description Trunk-to-East
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 10,999
 channel-protocol lacp
 channel-group 7 mode active
 no shutdown

interface port-channel 7
 description Trunk-to-East
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 999
 switchport trunk allowed vlan 10,999

! Server Host
interface fa0/1
 description vSphere-Server
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast
 spanning-tree bpduguard enable
 no shutdown

! Wireless Controller
interface fa0/8
 description WLC
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast
 no shutdown
```

---

## ðŸŸ¢ Step 5: Cable Map

- **RV340 LAN2 â‡” East Fa0/1** (single trunk)
- **East Fa0/7 â‡” West Fa0/7**
- **East Fa0/8 â‡” West Fa0/8** (Po7 EtherChannel)
- **East Fa0/3 â‡” Client ESXi host (vmnic0)**
- **West Fa0/1 â‡” Server ESXi host (vmnic0)**
- **West Fa0/8 â‡” WLC Port1**

---

## ðŸŸ¢ Step 6: Verification

On East & West:
```
show vlan brief
show interfaces trunk
show etherchannel summary
ping 10.10.10.1
```

From Clients/Servers:
- Client VM â†’ IP `172.20.10.x/24`, GW `172.20.10.1`
- Server VM â†’ IP `172.20.10.y/24`, GW `172.20.10.1`
- Test ping Client â†’ Server
- Wireless client on Homework SSID â†’ ping Server VM
```

---
