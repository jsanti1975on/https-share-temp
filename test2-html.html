<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tux Talks</title>
  <style>
    body {
      background-color: black;
      color: #00FF00;
      font-family: monospace;
      margin: 0;
      padding: 20px;
      /* center the whole page content so the character is centered vertically and horizontally */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    /* Cursor effect (optional if you want typing later) */
    .cursor {
      display: inline-block;
      width: 10px;
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink {
      50% { opacity: 0; }
    }

    #ascii {
      white-space: pre;
      font-size: 16px;
      line-height: 1.2;
      margin: 20px auto;
      text-align: center;
      display: inline-block; /* keep width to content so bubble centers */
    }

    /* speech bubble positioned above the ascii character; center the character */
    #char {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      margin: 30px auto;
    }

    .speech-bubble {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 100%;
      margin-bottom: 10px;
      background: rgba(0,255,255,0.14); /* stronger so it's visible on black */
      color: #0ff;
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,255,255,0.35);
      min-width: 140px;
      max-width: 320px;
      word-break: break-word;
      text-align: center;
      font-style: italic;
      pointer-events: auto; /* allow clicking the bubble to pause */
      transition: transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
      opacity: 0.98;
      z-index: 10;
    }

    .speech-bubble::after {
      content: '';
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: 100%;
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 10px solid rgba(66, 196, 196, 0.904);
    }

    /* subtle talking/pulse state */
    .speech-bubble.talk {
      transform: translateX(-50%) translateY(-6px) scale(1.03);
      box-shadow: 0 6px 18px rgba(0,255,255,0.06), 0 2px 6px rgba(0,255,255,0.06) inset;
    }

    /* when there isn't room above, flip the bubble below the character */
    .speech-bubble.below {
      top: 100%;
      bottom: auto;
      margin-top: 10px;
      margin-bottom: 0;
      transform: translateX(-50%);
    }

    .speech-bubble.below::after {
      top: auto;
      bottom: 100%;
      border-top: none;
      border-bottom: 10px solid rgba(0,255,255,0.14);
    }

    .nav-button {
      background: #222;
      color: #0f0;
      border: 2px solid #0f0;
      padding: 12px 24px;
      margin: 10px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    .nav-button:hover {
      background: #0f0;
      color: #000;
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <!-- character wrapper: speech bubble sits above the ASCII art -->
  <div id="char">
    <div id="speech-bubble" class="speech-bubble"></div>
    <div id="ascii"></div>
  </div>

  <div id="nav-links" style="margin-top:30px;">
    <h3>ðŸ”— Infrastructure Access</h3>
    <a href="https://10.10.10.13" target="_blank">
      <button class="nav-button">ESXi Server (10.10.10.13)</button>
    </a>
    <a href="https://10.10.10.50" target="_blank">
      <button class="nav-button">ESXi Clients (10.10.10.50)</button>
    </a>
  </div>

  <script>
    // Use String.raw to avoid needing to double-escape backslashes in ASCII art
    // More frames for smoother animation; String.raw keeps backslashes as-is.
  // Keep head/eyes lines stable; only vary the beak line so the head doesn't stretch
  const frames = [
    String.raw`   .--.
   |o_o |
   | _/ |
  //   \\
   (|    | )
  /'\_   _/\
  \___)=(___/`,

    String.raw`   .--.
   |-_- |
   | _/ |
  //   \\
   (|     |  )
  /'\_   _/\
  \___)=(___/`,

    String.raw`   .--.
   |O O |
   | =  |
  //   \\
   (|     | )
  /'\_   _/\
  \___)=(___/`,

    String.raw`   .--.
   |o_o |
   |\_/ |
  //   \\
   (|      | )
  /'\_   _/\
  \___)=(___/`,

    String.raw`   .--.
   |-_- |
   | _/ |
  //   \\
   (|     | )
  /'\_   _/\
  \___)=(___/`
  ];

    const statements = [
      "Hello, Mr. Jason Santiago",
      "This is the test site!!!"
    ];

    // Separate timings: frames animate faster than speech.
    let frameIndex = 0;
    let textIndex = 0;
    const frameIntervalMs = 1900; // slowed frames for readability
    const speechIntervalMs = 2000; // speech changes every 2s

    let frameTimer = null;
    let speechTimer = null;
    let paused = false;

  // indexes of frames that represent 'beak open' for talking sync
  const talkingFrames = new Set([2]);

    const asciiEl = document.getElementById('ascii');
    const bubbleEl = document.getElementById('speech-bubble');

    function render() {
      asciiEl.textContent = frames[frameIndex];
      bubbleEl.textContent = statements[textIndex];
      // toggle talk class when current frame is considered 'talking'
      if (talkingFrames.has(frameIndex)) {
        bubbleEl.classList.add('talk');
      } else {
        bubbleEl.classList.remove('talk');
      }
      // position the bubble above unless it would be clipped by the viewport top,
      // in which case show it below the character.
      bubbleEl.classList.remove('below');
      // allow the browser to layout the bubble and ascii first
      requestAnimationFrame(() => {
        const bubbleRect = bubbleEl.getBoundingClientRect();
        if (bubbleRect.top < 6) {
          bubbleEl.classList.add('below');
        } else {
          bubbleEl.classList.remove('below');
        }
      });
    }

    // re-evaluate bubble position on resize/orientation change
    window.addEventListener('resize', () => {
      render();
    });

    function startTimers() {
      stopTimers();
      frameTimer = setInterval(() => {
        if (!paused) {
          frameIndex = (frameIndex + 1) % frames.length;
          render();
        }
      }, frameIntervalMs);

      speechTimer = setInterval(() => {
        if (!paused) {
          textIndex = (textIndex + 1) % statements.length;
          // when speech changes, ensure the current frame is rendered (no jump needed)
          render();
        }
      }, speechIntervalMs);
    }

    function stopTimers() {
      if (frameTimer) { clearInterval(frameTimer); frameTimer = null; }
      if (speechTimer) { clearInterval(speechTimer); speechTimer = null; }
    }

    // click the ascii area or page to toggle pause/resume (but avoid toggling when clicking nav links)
    document.addEventListener('click', (e) => {
      // if click is within nav links, ignore
      if (e.target.closest && e.target.closest('#nav-links')) return;
      // toggle when clicking the character area or the page
      if (e.target && (e.target.closest && e.target.closest('#char') || e.target.tagName === 'BODY')) {
        paused = !paused;
        // visual feedback
        asciiEl.style.opacity = paused ? '0.6' : '1';
      }
    });

    // initialize
    render();
    startTimers();
  </script>
</body>
</html>
